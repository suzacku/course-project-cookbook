# Техническое задание: Персональная кулинарная книга

**Студент:** Андреев Владислав Сергеевич

**Группа:** 2407сб2

---

## 1\. Описание проекта

### 1.1 *Система управления кулинарной книгой*

### 1.2 Назначение

### *Система предназначена для удобного хранения и организации кулинарных рецептов. Она позволяет пользователям создавать, искать, фильтровать рецепты по различным параметрам.*

---

## 2\. Функциональные требования

### 2.1 Основные функции системы

#### Функция 1: **Добавление нового рецепта**

- **Описание:** Пользователь создаёт и сохраняет в системе новую карточку рецепта. Система предоставляет структурированную форму для ввода всей необходимой информации, включая ингредиенты с точными количествами и пошаговое описание приготовления.  
- **Входные данные:** Название рецепта, категория, список ингредиентов с количествами и единицами измерения, пошаговая инструкция, время приготовления, уровень сложности, изображение блюда.  
- **Результат:** Новая карточка рецепта создана, сохранена в базе данных и отображается в личной коллекции пользователя.

#### Функция 2: **Создание коллекций рецептов**

- **Описание:** Пользователь может группировать рецепты в тематические подборки для удобства организации (например, "Любимые блюда", "На Новый Год", "Быстрые завтраки").  
- **Входные данные:** Название новой коллекции, выбор рецептов из существующих для добавления в коллекцию.  
- **Результат:** Создана новая персонализированная папка-коллекция, содержащая отобранные рецепты.

#### Функция 3: **Поиск и фильтрация рецептов**

- **Описание:** Пользователь может находить рецепты в своей коллекции или в общедоступной базе по ключевым словам и с помощью набора фильтров для точного подбора блюд под свои задачи.  
- **Входные данные:** Ключевые слова, выбранные фильтры.  
- **Результат:** Отображение списка рецептов, соответствующих заданным критериям поиска и фильтрам.

#### Функция 4: **Просмотр рецепта**

- **Описание:** Пользователь открывает полную и структурированную карточку рецепта для ознакомления или использования во время готовки. Система отображает всю сохраненную информацию в удобном, легко читаемом формате.  
- **Входные данные:** Выбор рецепта из списка или результатов поиска.  
- **Результат:** Открытие страницы рецепта, содержащей название, изображение, список ингредиентов, пошаговую инструкцию, время приготовления, уровень сложности и другую сопутствующую информацию.

#### Функция 5: **Оплата подписки**

- **Описание:** Пользователь может оплатить месячную или годовую премиум-подписку на сервис для использования книги рецептов. После выбора тарифа и ввода данных банковской карты система выполняет безопасный платеж через интегрированное платежное решение.  
- **Входные данные:** Выбранный тарифный план (месяц/год), данные банковской карты.  
- **Результат:** Платеж обработан, подписка продлена, создана запись в БД

---

## 3\. Структура базы данных

### Таблица 1: **Users (Пользователи)**

**Описание:**  Хранит информацию о зарегистрированных пользователях системы

**Поля:**

- `Id` (int, PK) — уникальный идентификатор пользователя  
- `Email` (string) — электронная почта  
- `Password` (string) — пароль  
- `FIO` (string) — ФИО  
- `RegistrationDate` (datetime) — дата регистрации  
- `SubscriptionType` (string) — тип подписки  
- `SubscriptionExpiry` (datetime) — дата окончания подписки

**Связи:**

- Связь один-ко-многим с таблицей Recipes (один пользователь может создать много рецептов)  
- Связь один-ко-многим с таблицей Collections (один пользователь может создать много коллекций)

### Таблица 2: **Recipes (Рецепты)**

**Описание:**  Хранит основные данные о рецептах

**Поля:**

- `Id` (int, PK) — уникальный идентификатор рецепта  
- `Name` (string) — название рецепта  
- `Description` (text) — описание рецепта  
- `CookingTime` (int) — время приготовления в минутах  
- `DifficultyLevel` (string) — уровень сложности  
- `UserId` (int, FK → Users) — автор рецепта

**Связи:**

- Связь многие-к-одному с таблицей Users (один пользователь может создать много рецептов)  
- Связь один-ко-многим с таблицей instructions (один рецепт может содержать много шагов инструкции)  
- Связь один-ко-многим с таблицей Ingredients— (один рецепт может содержать много ингредиентов)

### Таблица 3: **Ingredients (Ингредиенты)**

**Описание:**  Хранит информацию об ингредиентах рецептов

**Поля:**

- `Id` (int, PK) — уникальный идентификатор ингредиента  
- `Name` (string) — название ингредиента  
- `Amount` (decimal) — количество  
- `Unit` (string) — единица измерения  
- `RecipeId` (int, FK → Recipes) — ссылка на рецепт

**Связи:**

- Связь многие-к-одному с таблицей Recipes (один рецепт может содержать много ингредиентов)

### Таблица 4: **Instructions (Инструкции)**

**Описание:**  Хранит пошаговые инструкции приготовления

**Поля:**

- `Id` (int, PK) — уникальный идентификатор шага  
- `StepNumber` (int) — номер шага  
- `Description` (text) — описание шага  
- `RecipeId` (int, FK → Recipes) — ссылка на рецепт

**Связи:**

- Связь многие-к-одному с таблицей Recipes (один рецепт может содержать много шагов инструкции)

### Таблица 5: **Categories (Категории)**

**Описание:**  Хранит категории рецептов

**Поля:**

- `Id` (int, PK) — уникальный идентификатор категории  
- `Name` (string) — название категории  
- `Description` (text) — описание категории

### Таблица 6: **RecipeCategories (Связь рецептов и категорий)**

**Описание:**  Связующая таблица между рецептами и категориями

**Поля:**

- `RecipeId` (int, FK → Recipes) — ссылка на рецепт  
- `CategoryId` (int, FK → Categories) — ссылка на категорию

**Связи:**

- Связь один-ко-многим с таблицей Recipes (один рецепт может принадлежать к нескольким категориям)  
- Связь один-ко-многим с таблицей Recipes (одна категория может содержать несколько рецептов)

### Таблица 7: **Collections (Коллекции)**

**Описание:**  ранит пользовательские коллекции рецептов

**Поля:**

- `Id` (int, PK) — уникальный идентификатор коллекции  
- `Name` (string) — название коллекции  
- `Description` (text) — описание коллекции  
- `UserId` (int, FK → Users) — владелец коллекции

**Связи:**

- Связь многие-к-одному с таблицей Users (один пользователь может создать много коллекций)

### Таблица 8: **CollectionRecipes (Рецепты в коллекциях)**

**Описание:**  Связующая таблица между коллекциями и рецептами

**Поля:**

- `CollectionId` (int, FK → Collections) — ссылка на коллекцию  
- `RecipeId` (int, FK → Recipes) — ссылка на рецепт

**Связи:**

- Связь один-ко-многим с таблицей Recipes (одна коллекция может содержать несколько рецептов)  
- Связь один-ко-многим с таблицей Collections (один рецепт может находиться в нескольких коллекциях)

### Таблица 9: **Payments (Платежи)**

**Описание:**  Хранит информацию о платежах за подписки

**Поля:**

- `Id` (int, PK) — уникальный идентификатор платежа  
- `UserId` (int, FK → Users) — пользователь, совершивший платеж  
- `Amount` (decimal) — сумма платежа  
- `PaymentDate` (datetime) — дата и время платежа  
- `Status` (string) — статус платежа  
- `SubscriptionType` (string) — тип подписки  
- `TransactionId` (string) — идентификатор транзакции в платежной системе

**Связи:**

- Связь многие-к-одному с таблицей Users (один пользователь может совершить много платежей)

---

## 4\. Основные формы приложения

#### Форма 1: **MainWindow (Главное окно)**

**Назначение:** Основное окно приложения для навигации и работы с рецептами

**Элементы управления:**

- MenuBar — главное меню приложения  
- TabControl — вкладки: "Мои рецепты", "Коллекции", "Поиск", "Покупки"  
- DataGrid — отображение списков рецептов/коллекций  
- TextBox — поле для быстрого поиска рецептов  
- StatusBar — строка статуса (информация о пользователе, подписке)

**Действия:**

- Кнопка "Добавить рецепт" — открывает RecipeEditWindow  
- Кнопка "Создать коллекцию" — открывает CollectionEditWindow  
- Кнопка "Профиль" — открывает UserProfileWindow  
- Кнопка "Выход" — завершение сеанса

#### Форма 2: **RecipeListWindow (Окно списка рецептов)**

**Назначение:** Просмотр и управление списком рецептов

**Элементы управления:**

- DataGrid — таблица рецептов с колонками: Название, Время, Сложность, Дата  
- TextBox (поиск) — фильтрация рецептов по названию  
- ComboBox — фильтрация по категориям  
- ComboBox — фильтрация по уровню сложности

**Действия:**

- Кнопка "Добавить" — открывает RecipeEditWindow для создания  
- Кнопка "Просмотреть" — открывает RecipeViewWindow для просмотра  
- Кнопка "Редактировать" — открывает RecipeEditWindow для изменения  
- Кнопка "Удалить" — удаляет выбранный рецепт с подтверждением  
- Кнопка "В коллекцию" — добавляет рецепт в выбранную коллекцию

#### Форма 3: **RecipeEditWindow (Окно редактирования рецепта)**

**Назначение:** Создание и редактирование рецептов

**Элементы управления:**

- TextBox — ввод названия рецепта  
- TextBox — многострочное описание  
- NumericUpDown — время приготовления в минутах  
- DataGrid — таблица ингредиентов (название, количество, единица)  
- DataGrid — таблица шагов приготовления  
- CheckBox — сделать рецепт общедоступным  
- PictureBox — загрузка фото блюда

**Действия:**

- Кнопка "Сохранить" — сохранение рецепта в базу данных  
- Кнопка "Отмена" — закрытие без сохранения  
- Кнопка "Добавить ингредиент" — добавление строки в таблицу ингредиентов  
- Кнопка "Удалить ингредиент" — удаление выбранного ингредиента  
- Кнопка "Добавить шаг" — добавление шага инструкции  
- Кнопка "Загрузить фото" — выбор изображения блюда

#### Форма 4: **RecipeViewWindow (Окно просмотра рецепта)**

**Назначение**: Полноэкранный просмотр рецепта для готовки

**Элементы управления:**

- Label (Название) — крупное отображение названия  
- PictureBox (Изображение) — фото блюда  
- ListBox (Ингредиенты) — список ингредиентов с количествами  
- ListBox (Инструкции) — пошаговые инструкции с номерами  
- Label (Время) — отображение времени приготовления

**Действия:**

- Кнопка "В список покупок" — добавляет ингредиенты в список покупок  
- Кнопка "Редактировать" — открывает RecipeEditWindow  
- Кнопка "Печать" — печать рецепта  
- Кнопка "Закрыть" — закрытие окна

#### Форма 5: **PaymentWindow (Оплата подписки)**

**Назначение:** Оформление премиум-подписки для расширенного доступа к функциям кулинарной книги

**Элементы управления:**

- ComboBox (Тариф) — выбор "Месячная" или "Годовая" подписка  
- TextBox (Номер карты) — ввод номера карты  
- TextBox (Срок действия) — ввод MM/YY  
- TextBox (CVV) — ввод кода безопасности  
- Label (Сумма) — отображение стоимости выбранного тарифа

**Действия:**

- Кнопка "Оплатить" — обработка платежа и активация подписки  
- Кнопка "Отмена" — закрытие формы без оплаты

---

## 5\. Схема переходов между формами

**Текстовое описание:**

#### **При запуске приложения**

Запуск → MainWindow (главная форма с вкладками)

#### **Из MainWindow**

#### **Вкладка "Мои рецепты":**

Кнопка "Добавить рецепт" → RecipeEditWindow (режим создания)  
Двойной клик по рецепту → RecipeViewWindow (просмотр)  
Кнопка "Редактировать" → RecipeEditWindow (режим редактирования)  
Кнопка "Удалить" → диалог подтверждения → удаление из базы

**Вкладка "Коллекции":**

Кнопка "Создать коллекцию" → CollectionEditWindow  
Клик по коллекции → RecipeListWindow (показ рецептов коллекции)

**Вкладка "Поиск":**

Кнопка "Расширенный поиск" → RecipeListWindow с фильтрами

**Меню "Профиль":**

Кнопка "Мой профиль" → UserProfileWindow  
Кнопка "Оформить подписку" → PaymentWindow

#### **Из RecipeEditWindow**

Кнопка "Сохранить" → сохранение рецепта → возврат на MainWindow (обновление списка)  
Кнопка "Отмена" → возврат на MainWindow без сохранения

#### **Из RecipeViewWindow**

Кнопка "Редактировать" → RecipeEditWindow (редактирование текущего рецепта)  
Кнопка "Закрыть" → возврат на предыдущую форму (MainWindow или RecipeListWindow)

#### **Из RecipeListWindow**

Кнопка "Добавить" → RecipeEditWindow (создание)  
Кнопка "Просмотреть" → RecipeViewWindow (просмотр выбранного рецепта)  
Кнопка "Назад" → возврат на MainWindow

#### **Из UserProfileWindow**

Кнопка "Управление подпиской" → PaymentWindow  
Кнопка "Сохранить" → сохранение профиля → возврат на MainWindow  
Кнопка "Отмена" → возврат на MainWindow без сохранения

#### **Из PaymentWindow**

**Кнопка "Оплатить":**

Успешная оплата → сообщение об успехе → возврат на MainWindow (обновление статуса подписки)  
Ошибка оплаты → сообщение об ошибке → остаемся на PaymentWindow  
Кнопка "Отмена" → возврат на предыдущую форму (MainWindow или UserProfileWindow)